<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · MonotonicSplines</title><meta name="title" content="API · MonotonicSplines"/><meta property="og:title" content="API · MonotonicSplines"/><meta property="twitter:title" content="API · MonotonicSplines"/><meta name="description" content="Documentation for MonotonicSplines."/><meta property="og:description" content="Documentation for MonotonicSplines."/><meta property="twitter:description" content="Documentation for MonotonicSplines."/><meta property="og:url" content="https://bat.github.io/MonotonicSplines.jl/stable/api/"/><meta property="twitter:url" content="https://bat.github.io/MonotonicSplines.jl/stable/api/"/><link rel="canonical" href="https://bat.github.io/MonotonicSplines.jl/stable/api/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img class="docs-light-only" src="../assets/logo.svg" alt="MonotonicSplines logo"/><img class="docs-dark-only" src="../assets/logo-dark.svg" alt="MonotonicSplines logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">MonotonicSplines</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../introduction/">Introduction</a></li><li class="is-active"><a class="tocitem" href>API</a><ul class="internal"><li><a class="tocitem" href="#Modules"><span>Modules</span></a></li><li><a class="tocitem" href="#Types-and-constants"><span>Types and constants</span></a></li><li><a class="tocitem" href="#Functions-and-macros"><span>Functions and macros</span></a></li><li class="toplevel"><a class="tocitem" href="#Documentation"><span>Documentation</span></a></li></ul></li><li><a class="tocitem" href="../LICENSE/">LICENSE</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/bat/MonotonicSplines.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/bat/MonotonicSplines.jl/blob/main/docs/src/api.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h1><h2 id="Modules"><a class="docs-heading-anchor" href="#Modules">Modules</a><a id="Modules-1"></a><a class="docs-heading-anchor-permalink" href="#Modules" title="Permalink"></a></h2><ul><li><a href="#MonotonicSplines.MonotonicSplines"><code>MonotonicSplines.MonotonicSplines</code></a></li></ul><h2 id="Types-and-constants"><a class="docs-heading-anchor" href="#Types-and-constants">Types and constants</a><a id="Types-and-constants-1"></a><a class="docs-heading-anchor-permalink" href="#Types-and-constants" title="Permalink"></a></h2><ul><li><a href="#MonotonicSplines.InvRQSpline"><code>MonotonicSplines.InvRQSpline</code></a></li><li><a href="#MonotonicSplines.RQSpline"><code>MonotonicSplines.RQSpline</code></a></li></ul><h2 id="Functions-and-macros"><a class="docs-heading-anchor" href="#Functions-and-macros">Functions and macros</a><a id="Functions-and-macros-1"></a><a class="docs-heading-anchor-permalink" href="#Functions-and-macros" title="Permalink"></a></h2><ul><li><a href="#MonotonicSplines.estimate_dYdX-Tuple{AbstractVector{&lt;:Real}, AbstractVector{&lt;:Real}}"><code>MonotonicSplines.estimate_dYdX</code></a></li><li><a href="#MonotonicSplines.rqs_forward"><code>MonotonicSplines.rqs_forward</code></a></li><li><a href="#MonotonicSplines.rqs_inverse"><code>MonotonicSplines.rqs_inverse</code></a></li><li><a href="#MonotonicSplines.rqs_params_from_nn"><code>MonotonicSplines.rqs_params_from_nn</code></a></li></ul><h1 id="Documentation"><a class="docs-heading-anchor" href="#Documentation">Documentation</a><a id="Documentation-1"></a><a class="docs-heading-anchor-permalink" href="#Documentation" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MonotonicSplines.MonotonicSplines" href="#MonotonicSplines.MonotonicSplines"><code>MonotonicSplines.MonotonicSplines</code></a> — <span class="docstring-category">Module</span></header><section><div><pre><code class="language-julia hljs">MonotonicSplines</code></pre><p>High-performance monotonic splines in Julia.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bat/MonotonicSplines.jl/blob/84cac09de4353c2bab0ce6e97748bbc8341645a7/src/MonotonicSplines.jl#L3-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MonotonicSplines.InvRQSpline" href="#MonotonicSplines.InvRQSpline"><code>MonotonicSplines.InvRQSpline</code></a> — <span class="docstring-category">Type</span></header><section><div><p>struct InvRQSpline{T&lt;:Real,N,...} &lt;: Function</p><p>Represents the inverse of <a href="#MonotonicSplines.RQSpline"><code>RQSpline</code></a>.</p><p><code>InvRQSpline</code> holds the same spline knot parameters as the corresponding <code>RQSpline</code>.</p><p>Users should not instantiate <code>InvRQSpline</code> directly, use <code>InverseFunctions.inverse(RQSpline(...))</code> instead.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bat/MonotonicSplines.jl/blob/84cac09de4353c2bab0ce6e97748bbc8341645a7/src/rqspline.jl#L116-L126">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MonotonicSplines.RQSpline" href="#MonotonicSplines.RQSpline"><code>MonotonicSplines.RQSpline</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct RQSpline{T&lt;:Real,N,...} &lt;: Function</code></pre><p>Represents a rational quadratic spline function or a set of such functions for multiple dimensions and samples.</p><p>Implements the splines originally proposed by Gregory and Delbourgo  (https://doi.org/10.1093/imanum/2.2.123)</p><p>Constructors:</p><pre><code class="language-julia hljs">RQSpline(pX::AbstractVector{&lt;:Real}, pY::AbstractVector{&lt;:Real}, dYdX::AbstractVector{&lt;:Real})
RQSpline(pX::AbstractArray{&lt;:Real,3}, pY::AbstractArray{&lt;:Real,3}, dYdX::AbstractArray{&lt;:Real,3})</code></pre><p>Fields:</p><ul><li><p><code>pX</code>: An array that holds the x-position of the spline knots.</p></li><li><p><code>pY</code>: An array that holds the y-position of the spline knots.</p></li><li><p><code>dYdX</code>: An array that holds the derivative at the spline knots.</p></li></ul><p><code>pX</code>, <code>pY</code> and <code>dYdX</code> may be</p><ul><li><p>vectors of length <code>K+1</code>, representing a one-dimensional spline with <code>K</code> segments, or</p></li><li><p>three-dimensional arrays of the shape <code>K+1 x n_dims x n_samples</code>, representing a set of splines for different dimensions and input samples.</p></li></ul><p>The spline is continued with a linear function of slope one beyond the first and last knot, so the first and last entry of dYdX should be one if the spline is indended to be used at this extended range.</p><p><code>RQSpline</code> supports the InverseFunctions, ChangesOfVariables, and Functors APIs.</p><p>Example:</p><pre><code class="nohighlight hljs">using MonotonicSplines

f = RQSpline(posX, posX, dY_dX)
Y = f(X)

using InverseFunctions: inverse
X ≈ inverse(f)(Y)

using ChangesOfVariables: with_logabsdet_jacobian
Y, LADJ = with_logabsdet_jacobian(f, X)</code></pre><p>When instantiated as a set of multi-dimension/samples splines, <code>RQSpline</code> uses the package KernelAbstractions for parallel CPU or GPU processing. Custom <code>ChainRulesCore</code> rules are provided for effecient automatic differentation.</p><p>Random spline generation is supported and RQSpline comes with specialized support for Plots:</p><pre><code class="language-julia hljs">using MonotonicSplines, Plots, InverseFunctions
f = rand(RQSpline)
plot(f); plot!(inverse(f))
plot(f, xlims = (-6, 6)); plot!(inverse(f), xlims = (-6, 6))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bat/MonotonicSplines.jl/blob/84cac09de4353c2bab0ce6e97748bbc8341645a7/src/rqspline.jl#L3-L69">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MonotonicSplines.estimate_dYdX-Tuple{AbstractVector{&lt;:Real}, AbstractVector{&lt;:Real}}" href="#MonotonicSplines.estimate_dYdX-Tuple{AbstractVector{&lt;:Real}, AbstractVector{&lt;:Real}}"><code>MonotonicSplines.estimate_dYdX</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">MonotonicSplines.estimate_dYdX(pX::AbstractVector{&lt;:Real}, pY::AbstractVector{&lt;:Real})</code></pre><p>Get estimates for derivatives at the given knot points <code>pX</code>, <code>pY</code>.</p><p>The resulting derivatives can be used directly, but are also useful as initial values, when optimizing spline derivative parameters based on application-specific criteria.</p><p>Uses a linear estimate for the first and last knot and a 2nd order polynomial estimate over three knots for the other knots.</p><p>Example:</p><pre><code class="language-julia hljs">dYdX = MonotonicSplines.estimate_dYdX(pX, pY)
f = RQSpline(pX, pY, dYdX)</code></pre><p>When an RQSpline is intended to be used beyong the first and last knot, the first and last derivative should be one, so in that case use</p><pre><code class="language-julia hljs">f = RQSpline(pX, pY, vcat(1, dYdX[begin+1:end-1], 1))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bat/MonotonicSplines.jl/blob/84cac09de4353c2bab0ce6e97748bbc8341645a7/src/utils.jl#L42-L67">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MonotonicSplines.rqs_forward" href="#MonotonicSplines.rqs_forward"><code>MonotonicSplines.rqs_forward</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">MonotonicSplines.rqs_forward(x::Real, pX::AbstractVector{&lt;:Real}, pY::AbstractVector{&lt;:Real}, dYdX::AbstractVector{&lt;:Real})
MonotonicSplines.rqs_forward(X::AbstractArray{&lt;:Real,2}, pX::AbstractArray{&lt;:Real,3}, pY::AbstractArray{&lt;:Real,3}, dYdX::AbstractArray{&lt;:Real,3})</code></pre><p>Apply the rational quadratic spline function(s) defined by the parameters <code>pX</code> (pX), <code>pY</code> (pY), and <code>dYdX</code> (dYdX), to the input(s) <code>X</code>.</p><p>See <a href="#MonotonicSplines.RQSpline"><code>RQSpline</code></a> for more details.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bat/MonotonicSplines.jl/blob/84cac09de4353c2bab0ce6e97748bbc8341645a7/src/rqspline.jl#L151-L159">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MonotonicSplines.rqs_inverse" href="#MonotonicSplines.rqs_inverse"><code>MonotonicSplines.rqs_inverse</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">MonotonicSplines.rqs_inverse(x::Real, pX::AbstractVector{&lt;:Real}, pY::AbstractVector{&lt;:Real}, dYdX::AbstractVector{&lt;:Real})
MonotonicSplines.rqs_inverse(X::AbstractArray{&lt;:Real,2}, pX::AbstractArray{&lt;:Real,3}, pY::AbstractArray{&lt;:Real,3}, dYdX::AbstractArray{&lt;:Real,3})</code></pre><p>Apply the inverse of the rational quadratic spline function(s) defined by the parameters <code>pX</code> (pX), <code>pY</code> (pY), and <code>dYdX</code> (dYdX), to the input(s) <code>X</code>.</p><p>See <a href="#MonotonicSplines.InvRQSpline"><code>InvRQSpline</code></a> for more details.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bat/MonotonicSplines.jl/blob/84cac09de4353c2bab0ce6e97748bbc8341645a7/src/rqspline.jl#L281-L290">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MonotonicSplines.rqs_params_from_nn" href="#MonotonicSplines.rqs_params_from_nn"><code>MonotonicSplines.rqs_params_from_nn</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">MonotonicSplines.rqs_params_from_nn(θ_raw::AbstractArray, n_dims_trafo::Integer, B::Real = 5.)</code></pre><p>Process the raw output parameters of a neural network to generate parameters for a set of rational quadratic spline functions.</p><p><strong>Arguments</strong></p><ul><li><code>θ_raw</code>: A matrix where each column represents the raw parameters for a sample.</li><li><code>n_dims_trafo</code>: The number of spline functions for which parameters are to be produced.</li><li><code>B</code>: Sets the rage of the splines.</li></ul><p><strong>Returns</strong></p><ul><li>A tuple <code>pX, pY, dYdX</code> containing the positions of and derivatives at the spline knots. The parameters are stored in a <code>K+1 x n_spline_functions_per_sample x n_samples</code> array.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bat/MonotonicSplines.jl/blob/84cac09de4353c2bab0ce6e97748bbc8341645a7/src/utils.jl#L79-L92">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../introduction/">« Introduction</a><a class="docs-footer-nextpage" href="../LICENSE/">LICENSE »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.5.0 on <span class="colophon-date" title="Friday 16 August 2024 21:32">Friday 16 August 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
